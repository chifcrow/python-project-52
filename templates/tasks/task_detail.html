{% extends "base.html" %}
{% load user_extras %}

{% block title %}{{ task.name }}{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-start mb-3">
    <div>
        <h1 class="h3 mb-1">{{ task.name }}</h1>
        <div class="text-muted">
            Создано: {{ task.created_at|date:"d.m.Y H:i" }}
        </div>
    </div>
    <div class="text-end">
        <a class="btn btn-sm btn-outline-secondary"
           href="{% url 'tasks:update' task.pk %}">
            Изменить
        </a>
        <a class="btn btn-sm btn-outline-danger"
           href="{% url 'tasks:delete' task.pk %}">
            Удалить
        </a>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <dl class="row mb-0">
            <dt class="col-sm-3">Статус</dt>
            <dd class="col-sm-9">{{ task.status.name }}</dd>

            <dt class="col-sm-3">Исполнитель</dt>
            <dd class="col-sm-9">{{ task.executor|display_full_name }}</dd>

            <dt class="col-sm-3">Автор</dt>
            <dd class="col-sm-9">{{ task.author|display_full_name }}</dd>

            <dt class="col-sm-3">Метки</dt>
            <dd class="col-sm-9">
                {% for label in task.labels.all %}
                    <span class="badge bg-secondary me-1">{{ label.name }}</span>
                {% empty %}
                    <span class="text-muted">-</span>
                {% endfor %}
            </dd>

            <dt class="col-sm-3">Описание</dt>
            <dd class="col-sm-9">
                {% if task.description %}
                    <pre class="mb-0">{{ task.description }}</pre>
                {% else %}
                    <span class="text-muted">-</span>
                {% endif %}
            </dd>
        </dl>
    </div>
</div>
{% endblock %}
